{% extends "landingPage\page.html" %}
{% block title %}
    <title>{{service_name}}文档 | Azure</title>
{% endblock %}

{% block header %}
    <link rel="stylesheet" type="text/css" href="{{cssLink}}" />
    <script type="text/javascript" src="{{jqueryLink}}"></script>
    <script type="text/javascript" src="{{jsLink}}"></script>
{% endblock %}

{% block content %}
    <script>
        amp.options.flashSS.swf = "http://amp.azure.net/libs/amp/1.1.1/techs/StrobeMediaPlayback.2.0.swf";
        amp.options.flashSS.plugin = "http://amp.azure.net/libs/amp/1.1.1/techs/MSAdaptiveStreamingPlugin-osmf2.0.swf";
        amp.options.silverlightSS.xap = "http://amp.azure.net/libs/amp/1.1.1/techs/SmoothStreamingPlayer.xap";
        var navigationJsonStr = '{% autoescape off %}{{navigationJson}}{% endautoescape %}'
		var activeActicleId = null;
        var pageId = null;
        function renderNavigation(navigationJsonStr, activeActicleId) {
            navigationJson = JSON.parse(navigationJsonStr);
            mainDiv = document.getElementById("wa-navigationLeft");

            serviceTitle = document.createElement("a");
            serviceTitle.id = navigationJson.id;
            serviceTitle.innerHTML = navigationJson.service;
            serviceTitle.className = "toggler";
            editButt = document.createElement("a");
            editButt.href = "javascript:editField('"+serviceTitle.id+"', 'text')";
            editButt.title = "编辑";
            editImage = document.createElement("img");
            editImage.src = "/static/landingPage/img/edit.png";
            editImage.style = "width:20px;height:20px;margin-bottom:0px";
            editButt.appendChild(editImage);
            serviceTitle.appendChild(editButt);
            mainDiv.appendChild(serviceTitle);

            mainUl = document.createElement("ul");
            mainUl.className = "toggled";
            mainDiv.appendChild(mainUl);

            for (var i = 0; i < navigationJson.navigation.length; i++) {
                groupLi = document.createElement("li");
                groupLi.id = navigationJson.navigation[i].id + "_header";
                groupLi.setAttribute("data-control", "toggle");
                groupLi.setAttribute("data-tag-name", navigationJson.navigation[i].id);
                groupLi.setAttribute("data-service-name", navigationJson.id);
                mainUl.appendChild(groupLi);
                groupTitle = document.createElement("a");
                groupTitle.setAttribute("onclick", "show('" + navigationJson.navigation[i].id + "_header" + "')");
                groupTitle.innerHTML = navigationJson.navigation[i].group;
                groupTitle.className = "toggler";
                groupTitle.id = navigationJson.navigation[i].id + "_group_title";
                editButt = document.createElement("a");
                editButt.href = "javascript:editField('"+groupTitle.id+"', 'text')";
                editButt.title = "编辑";
                editButt.addEventListener("click", function(e){
                    if ( e && e.stopPropagation ) 
                        e.stopPropagation(); 
                    else
                        window.event.cancelBubble = true; 
                });
                editImage = document.createElement("img");
                editImage.src = "/static/landingPage/img/edit.png";
                editImage.setAttribute("style", "width:20px;height:20px;margin-bottom:0px");
                editButt.appendChild(editImage);
                groupTitle.appendChild(editButt);
                deleteButt = document.createElement("a");
                deleteButt.href = "javascript:deleteField('"+groupLi.id+"')";
                deleteButt.title = "删除";
                deleteButt.addEventListener("click", function(e){
                    if ( e && e.stopPropagation ) 
                        e.stopPropagation(); 
                    else
                        window.event.cancelBubble = true; 
                });
                deleteImage = document.createElement("img");
                deleteImage.setAttribute("style", "width:20px;height:20px;margin-bottom:0px");
                deleteImage.src = "/static/landingPage/img/delete.png";
                deleteButt.appendChild(deleteImage);
                groupTitle.appendChild(deleteButt);
                groupLi.appendChild(groupTitle);
                groupUl = document.createElement("ul");
                groupUl.id = navigationJson.navigation[i].id;
                groupUl.className = "toggled";
                groupLi.appendChild(groupUl);
                for (var j = 0; j < navigationJson.navigation[i].articles.length; j++) {
                    articleLi = document.createElement("li");
                    articleLi.id = navigationJson.navigation[i].articles[j].id+"_li"
                    groupUl.appendChild(articleLi);
                    articleLink = document.createElement("a");
                    articleLink.href = navigationJson.navigation[i].articles[j].link;
                    articleLink.innerHTML = navigationJson.navigation[i].articles[j].title;
                    articleLink.id = navigationJson.navigation[i].articles[j].id;
                    articleLink.setAttribute("data-link-service-name", navigationJson.id);
                    articleLink.setAttribute("data-link-tag-name", navigationJson.navigation[i].articles[j].id);
                    editButt = document.createElement("a");
                    editButt.href = "javascript:editField('"+articleLink.id+"', 'link')";
                    editButt.addEventListener("click", function(e){
                        if ( e && e.stopPropagation ) 
                            e.stopPropagation(); 
                        else
                            window.event.cancelBubble = true; 
                    });
                    editButt.title = "编辑";
                    editImage = document.createElement("img");
                    editImage.src = "/static/landingPage/img/edit.png";
                    editImage.setAttribute("style", "width:20px;height:20px;margin-bottom:0px");
                    editButt.appendChild(editImage);
                    articleLink.appendChild(editButt);
                    deleteButt = document.createElement("a");
                    deleteButt.href = "javascript:deleteField('"+articleLi.id+"')";
                    deleteButt.title = "删除";
                    deleteButt.addEventListener("click", function(e){
                        if ( e && e.stopPropagation ) 
                            e.stopPropagation(); 
                        else
                            window.event.cancelBubble = true; 
                    });
                    deleteImage = document.createElement("img");
                    deleteImage.src = "/static/landingPage/img/delete.png";
                    deleteImage.setAttribute("style", "width:20px;height:20px;margin-bottom:0px");
                    deleteButt.appendChild(deleteImage);
                    articleLink.appendChild(deleteButt);
                    articleLi.appendChild(articleLink);
                }
            }
            if (activeActicleId == null) {
                document.getElementById(navigationJson.navigation[0].id + "_header").className = "active open";
                pageId = navigationJson.navigation[0].id + "_header";
            }
            else {
                for (var i = 0; i < navigationJson.navigation.length; i++) {
                    for (var j = 0; j < navigationJson.navigation[i].articles.length; j++) {
                        if (navigationJson.navigation[i].articles[j].id == activeActicleId) {
                            document.getElementById(navigationJson.navigation[i].id + "_header").className = "active open";
                            pageId = navigationJson.navigation[i].id + "_header";
                            document.getElementById(activeActicleId).style.color = "#00abec";
                            break;
                        }
                    }
                }
            }
        }
        function dropdownSelectChange() {
            dropdownSelect = document.getElementById('dropdown-cta');
            contentSelected = document.getElementById('wa-dropdown-value');
            document.getElementById('wa-button-link').href = dropdownSelect.value;
            contentSelected.innerHTML = dropdownSelect.options[dropdownSelect.selectedIndex].innerHTML;
        }

        // show article-content when click on link
        $(function () {
            $(".wa-arrowLink.wa-arrowLink-blue").click(function () {
                $(this).attr('style', 'display:none');
                $(this).siblings(".article-content").removeAttr('style');
            });
        });
        
        var recentUpdateCount = {{recentUpdates|length}};
        function addNewUpdate(){
            var xmlhttp;
            if (window.XMLHttpRequest)
            {// code for IE7+, Firefox, Chrome, Opera, Safari
                xmlhttp=new XMLHttpRequest();
            }
            else
            {// code for IE6, IE5
                xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
            }
            xmlhttp.onreadystatechange=function()
            {
                if (xmlhttp.readyState==4 && xmlhttp.status==200)
                {
                    addRecentUpdate = document.getElementById("add_new_update");
                    newRecentUpdate = document.createElement("div");
                    newRecentUpdate.className = "wa-content wa-content-3up";
                    newRecentUpdate.id = "edit_recent_update"+(recentUpdateCount+1);
                    newRecentUpdate.innerHTML = xmlhttp.responseText;
                    insertAfter(newRecentUpdate, addRecentUpdate);
                    element = document.getElementById("edit_recent_title"+(recentUpdateCount+1));

                    textArea = element.getElementsByTagName("textarea")[0];
                    editting["edit_recent_title"+(recentUpdateCount+1)] = {"element":element, "textField": textArea, "text":document.createTextNode("")};

                    element = document.getElementById("edit_recent_date"+(recentUpdateCount+1));
                    textArea = element.getElementsByTagName("textarea")[0];
                    editting["edit_recent_date"+(recentUpdateCount+1)] = {"element":element, "textField": textArea, "text":document.createTextNode("")};

                    element = document.getElementById("edit_recent_description"+(recentUpdateCount+1));
                    textArea = element.getElementsByTagName("textarea")[0];
                    editting["edit_recent_description"+(recentUpdateCount+1)] = {"element":element, "textField": textArea, "text":document.createTextNode("")};

                    element = document.getElementById("edit_recent_detail"+(recentUpdateCount+1));
                    textArea = element.getElementsByTagName("textarea")[0];
                    editting["edit_recent_detail"+(recentUpdateCount+1)] = {"element":element, "textField": textArea, "text":document.createTextNode("")};
                    recentUpdateCount++;
                }
            }
            xmlhttp.open("GET","/newrecentupdate/"+(recentUpdateCount+1)+"/",true);
            xmlhttp.send();
        }
        function insertAfter(newNode, referenceNode) {
            referenceNode.parentNode.insertBefore(newNode, referenceNode.nextSibling);
        }
        var tutorialOptionCount = {{options|length}};
        function addTutorialOption(id){
            element = document.getElementById(id);
            var xmlhttp3;
            if (window.XMLHttpRequest)
            {// code for IE7+, Firefox, Chrome, Opera, Safari
                xmlhttp3=new XMLHttpRequest();
            }
            else
            {// code for IE6, IE5
                xmlhttp3=new ActiveXObject("Microsoft.XMLHTTP");
            }
            xmlhttp3.onreadystatechange=function()
            {
                if (xmlhttp3.readyState==4 && xmlhttp3.status==200)
                {
                    editSelectList = document.createElement("div");
                    editSelectList.id = "edit_option_"+(tutorialOptionCount+1);
                    editSelectList.innerHTML = xmlhttp3.responseText;
                    element.parentElement.insertBefore(editSelectList, element);
                    tutorialOptionCount++;
                }
            }
                    
            xmlhttp3.open("GET","/newTutorialOption/"+(tutorialOptionCount+1)+"/",true);
            xmlhttp3.send();
            
        }
    </script>
    <script>
        var editting = {};
        function editField(id, type) {
            element = document.getElementById(id);
            if(type == "text"){
                if(!editting[id]){
                    textField = document.createElement("textarea");
                    textField.addEventListener("click", function(e){
                        if ( e && e.stopPropagation ) 
                            e.stopPropagation(); 
                        else
                            window.event.cancelBubble = true; 
                    });
                    textField.setAttribute("style","width:85%;")
                    for (var i = 0; i<element.childNodes.length; i++){
                        if(element.childNodes[i].nodeValue!=null && element.childNodes[i].nodeValue.trim()!=""){
                            textField.value = element.childNodes[i].nodeValue.trim();
                            editting[id]={"element":element, "textField":textField, "text":element.childNodes[i]}
                            element.replaceChild(textField, element.childNodes[i]);
                            break;
                        }
                    }
                }
                else{
                    editting[id].text.nodeValue = editting[id].textField.value;
                    a = editting[id].element.replaceChild(editting[id].text, editting[id].textField);
                    editting[id] = false;
                }
            }
            else if(type == "link"){
                if(!editting[id]){
                    container = document.createElement("span");
                    textField1 = document.createElement("textarea");
                    textField1.setAttribute("style","width:85%;")
                    textField2 = document.createElement("textarea");
                    textField2.setAttribute("style","width:85%;")
                    for (var i = 0; i<element.childNodes.length; i++){
                        if(element.childNodes[i].nodeValue!=null && element.childNodes[i].nodeValue.trim()!=""){
                            textField1.value = element.childNodes[i].nodeValue.trim();
                            textField2.value = element.href;
                            editting[id]={"element":element, "container":container, "title":textField1, "link":textField2, "text":element.childNodes[i]}
                            container.appendChild(textField1);
                            container.appendChild(textField2);
                            element.parentElement.insertBefore(container, element);
                            element.childNodes[i].nodeValue = "";
                            break
                        }
                    }
                    
                }
                else{
                    editting[id].element.tagName = "a";
                    editting[id].text.nodeValue = editting[id].title.value;
                    editting[id].element.href = editting[id].link.value
                    editting[id].container.parentElement.replaceChild(editting[id].element, editting[id].container);
                    editting[id] = false;
                }
            }
            else if(type == "select_list"){
                
                if(!editting[id]){
                    var xmlhttp2;
                    if (window.XMLHttpRequest)
                    {// code for IE7+, Firefox, Chrome, Opera, Safari
                        xmlhttp2=new XMLHttpRequest();
                    }
                    else
                    {// code for IE6, IE5
                        xmlhttp2=new ActiveXObject("Microsoft.XMLHTTP");
                    }
                    xmlhttp2.onreadystatechange=function()
                    {
                        if (xmlhttp2.readyState==4 && xmlhttp2.status==200)
                        {
                            
                            editSelectList = document.createElement("div");
                            editSelectList.innerHTML = xmlhttp2.responseText;
                            editting[id]={"element":element, "editSelectList":editSelectList}
                            element.parentElement.replaceChild(editSelectList, element);
                        }
                    }
                    options = element.getElementsByTagName("option");
                    optionsJson = [];
                    
                    for(var i = 0; i<options.length; i++){
                        option = {"title":options[i].innerHTML.trim(), "link":options[i].value.trim()};
                        optionsJson[i]=option;
                        
                    }
                    optionsJsonStr = JSON.stringify(optionsJson);
                    xmlhttp2.open("POST","/editTutorialSelectList/activeDirectory/",true);//TODO
                    xmlhttp2.setRequestHeader("options", optionsJsonStr)
                    xmlhttp2.send();
                    
                }
                else{
                    editting[id].editSelectList.parentElement.replaceChild(editting[id].element, editting[id].editSelectList);
                    divList = editting[id].editSelectList.getElementsByTagName("div");
                    options = editting[id].element.getElementsByTagName("option");
                    if(divList.length>options.length){
                        for(var i = 0; i<divList.length-options.length; i++){
                            newOption = options[0].cloneNode(true);
                            options[0].parentElement.appendChild(newOption);
                        }
                        options = editting[id].element.getElementsByTagName("option");
                    }
                    else if(divList.length<options.length){
                        for(var i = 0; i<options.length-divList.length; i++){
                            options[i].parentElement.removeChild(options[i]);
                        }
                        options = editting[id].element.getElementsByTagName("option");
                    }
                    for(var i = 0; i<divList.length; i++){
                        textareas = divList[i].getElementsByTagName("textarea");
                        options[i].value = textareas[1].value;
                        options[i].innerHTML = textareas[0].value;
                    }
                    editting[id] = false;
                }
            }
            else if(type == "video"){
                if(!editting[id]){
                    edit_video = document.getElementById(id);
                    edit_video.style.display = "none";
                    des_edit_video = document.getElementById("des_"+id);
                    des_edit_video.style.display = "none";
                    edit_video_fields = document.getElementById("video_editing_"+id.substring(10, id.length));
                    edit_video_fields.style.display = "block";
                    editting[id] = true;
                }
                else{
                    link = document.getElementById(id);
                    thumbnail = link.getElementsByClassName("thumbnail")[0];
                    dateAndDuration = link.getElementsByClassName("date")[0].getElementsByTagName("span");
                    descr = document.getElementById("des_"+id);
                    video_counter_str = id.substring(10, id.length);
                    link.href = document.getElementById("video_url_"+video_counter_str).value;
                    dateAndDuration[1].innerHTML = document.getElementById("video_publishDate_"+video_counter_str).value;
                    link.title = document.getElementById("video_title_"+video_counter_str).value;
                    dateAndDuration[0].innerHTML = document.getElementById("video_duration_"+video_counter_str).value;
                    thumbnail.src = "{{imgLink}}" + document.getElementById("video_image_title_"+video_counter_str).value+".png";
                    descr.innerHTML = document.getElementById("video_description_"+video_counter_str).value;
                    link.style.display = "block";
                    descr.style.display = "block";
                    document.getElementById("video_editing_"+id.substring(10, id.length)).style.display = "none";
                    editting[id] = false;
                }
            }
        }
        function deleteField(id){
            element = document.getElementById(id);
            element.parentElement.removeChild(element);
        }

        var video_count = {{videoLinks|length }};
        var next_video = {{videoLinks|length }};
        function add_video(){
            videoContainer = document.getElementById("video_container");
            
        }
        
        function submitPage(){
            navigationJsonStr = getNavigationJsonStr();
            contentJsonStr = getContentJsonStr();
            recentUpdateJsonStr = getRecentUpdateJsonStr();
            metaJsonStr = getMetaJsonStr();
            tutorialOptionsJsonStr = getTutorialOptionsJson();
            videoLinkJsonStr = getVideoLinkJson();
            document.write(videoLinkJsonStr);
        }

        function getVideoLinkJson(){
            alert(next_video);
            videoLinkJson = [];
            for(i=0; i<next_video; i++){
                title = document.getElementById("video_title_"+i);
                if(title != null){
                    video = new Object();
                    video.Title = title.value;
                    video.ImageUrl = document.getElementById("video_image_title_"+i).value;
                    video.VideoUrl = document.getElementById("video_url_"+i).value;
                    video.Description = document.getElementById("video_description_"+i).value;
                    video.PublishTime = document.getElementById("video_description_"+i).value;
                    video.Duration = document.getElementById("video_duration_"+i).value;
                    videoLinkJson.push(video);
                }
            }
            return JSON.stringify(videoLinkJson);
        }

        function getTutorialOptionsJson(){
            tutorialOptionsJson = [];
            selectList = document.getElementById("dropdown-cta");
            for(i=0; i<selectList.options.length; i++){
                option = new Object();
                option.title = selectList.options[i].textContent.trim()
                option.link = selectList.options[i].value;
                tutorialOptionsJson.push(option)
            }
            return JSON.stringify(tutorialOptionsJson);
        }

        function getMetaJsonStr(){
            metaJson = new Object();
            metaJson.metat_keywords = document.getElementById("metat_keywords").textContent.trim();
            metaJson.meta_description = document.getElementById("meta_description").textContent.trim();
            return JSON.stringify(metaJson);
        }

        function getRecentUpdateJsonStr(){
            recentUpdateJson = [];
            for(i=1; i<=recentUpdateCount; i++){
                try{
                    update = new Object();
                    update.update_title = document.getElementById("edit_recent_title"+i).textContent.trim();
                    update.update_description = document.getElementById("edit_recent_description"+i).textContent.trim();
                    update.update_date = document.getElementById("edit_recent_date"+i).textContent.trim();
                    update.update_detail = document.getElementById("edit_recent_detail"+i).textContent.trim();
                    update.link = "#";
                    recentUpdateJson.push(update);
                }
                catch(e){
                
                }
            }
            return JSON.stringify(recentUpdateJson);
        }

        function getContentJsonStr(){
            contentJson = new Object();
            contentJson.subtitle = document.getElementById("edit_subtitle").textContent.trim();
            contentJson.tutorial_message =  document.getElementById("edit_tutorial_message").textContent.trim();
            contentJson.update_search_links = "/what-is-new/";
            return JSON.stringify(contentJson);
        }

        function getNavigationJsonStr(){
            navigation = document.getElementById("wa-navigationLeft");
            rootTag = navigation.getElementsByTagName("a")[0];
            navigationJson = new Object();
            navigationJson.id = rootTag.id;
            navigationJson.service = rootTag.textContent.trim();
            ulTag = navigation.getElementsByTagName("ul")[0];
            navigationJson.navigation = [];
            for(i=0; i<ulTag.childNodes.length; i++){
                group = new Object();
                group.id = ulTag.childNodes[i].getAttribute("data-tag-name");
                group.group = ulTag.childNodes[i].getElementsByTagName("a")[0].textContent.trim();
                group.articles = [];
                articleUlTag = ulTag.childNodes[i].getElementsByTagName("ul")[0];
                for(j=0; j<articleUlTag.childNodes.length; j++){
                    article = new Object();
                    aTag = articleUlTag.childNodes[j].getElementsByTagName("a")[0];
                    article.id = aTag.id;
                    article.link = aTag.href;
                    article.title = aTag.textContent.trim();
                    group.articles.push(article);
                }
                navigationJson.navigation.push(group);
            }
            return JSON.stringify(navigationJson);
        }

        function metaEditField(){
            meta_data_fields = document.getElementById("mata_data_editing");
            if(meta_data_fields.style.display == "none")
                meta_data_fields.style.display = "block";
            else
                meta_data_fields.style.display = "none";
        }
    </script>
    <style>
        .old-main-container {
            width: 100% !important;
            padding: 20px 0px !important;
        }
    </style>
    <div class="wa-container-documentation wa-container-nested-documentation">
        <section class="wa-section wa-section-micro">
            <div class="wa-content wa-content-documentation wa-content-4up">
                <div class="wa-spacer wa-spacer-docSide">
                    <div id="wa-navigationLeft" class="wa-navigationLeft" data-control="toggle">

                    </div>
                    <script>
                        renderNavigation(navigationJsonStr, activeActicleId);
                    </script>
                </div>
                <div class="wa-spacer wa-spacer-3down wa-spacer-docContent">
                    <div class="wa-content">
                        <h1>
                            {{service_name}}文档
                            <a href="javascript:metaEditField()" title="编辑">
                                <img src="/static/landingPage/img/edit.png" style="width:20px;height:20px;margin-bottom:0px"/>
                            </a>
                        </h1>
                        <div id="mata_data_editing" style="display:none">
                            <div>
                                <div>关键字</div><textarea id="metat_keywords" style="width:85%">{{metaKeywords}}</textarea>
                            </div>
                            <div>
                                <div>描述</div><textarea id="meta_description" style="width:85%">{{metaDescription}}</textarea>
                            </div>
                        </div>
                        <h5 id="edit_subtitle">
                            {{subtitle}}
                            <a href="javascript:editField('edit_subtitle', 'text')" title="编辑">
                                <img src="/static/landingPage/img/edit.png" style="width:20px;height:20px;margin-bottom:0px"/>
                            </a>
                        </h5>
                        <label for="dropdown-cta" class="wa-dropdown-label" id="edit_tutorial_message">
                            {{tutorial_message}}
                            <a href="javascript:editField('edit_tutorial_message', 'text')" title="编辑">
                                <img src="/static/landingPage/img/edit.png" style="width:20px;height:20px;margin-bottom:0px"/>
                            </a>
                        </label>
                        {% if options|length == 1 %}
                            <p class="tutorial-label">
                                <span id="edit_tutorial_list">
                                {{first_option_title}}
                                </span>
                                <a href="javascript:editField('edit_tutorial_list', 'text')" title="编辑">
                                    <img src="/static/landingPage/img/edit.png" style="width:20px;height:20px;margin-bottom:0px"/>
                                </a>
                                <a class="wa-button wa-button-primary wa-button-mini" href="{{first_option_link}}" data-linker="cta">
                                    入门教程
                                </a>
                            </p>
                        {% else %}
                            <div class="wa-dropdown-container wa-dropdown-medium" id="edit_tutorial_select_list">
                                <select id="dropdown-cta" class="wa-dropdown" data-control="dropdown dropdown-linker" data-linker="cta" onchange="dropdownSelectChange()">
                                    {% for option in options %}
                                    <option value="{{option.link}}">
                                        {{option.title}}
                                    </option>
                                    {% endfor %}
                                </select>
                                <script>
                                checkDropdownMenuHasMoreThanOneOption();
                                </script>
                                <span id="wa-dropdown-value" class="wa-dropdown-value">{{first_option_title}}</span><span class="wa-dropdown-arrow"></span>
                            </div>
                            <a href="javascript:editField('edit_tutorial_select_list', 'select_list')" title="编辑">
                                <img src="/static/landingPage/img/edit.png" style="width:20px;height:20px;margin-bottom:0px"/>
                            </a>
                            <a id="wa-button-link" data-service-name="virtual-machines" href="{{first_option_link}}" class="wa-button wa-button-primary wa-button-mini" data-linker="cta">入门教程</a>
                        {% endif %}
                    </div>
                    <div class="wa-content wa-content-divided sub-hero-heading">
                        <h2>
                            {{service_name}}视频
                        </h2>
                    </div>
                    <div class="wa-content wa-content-3up" id="video_container">
                        {% for videoLink in videoLinks%}
                            <div class="wa-spacer" id="edit_video_full{{forloop.counter}}">
                                <a  id="edit_video{{forloop.counter}}" href="{{videoLink.video_url}}" data-control="" data-expanding="false" class="wa-video-thumbnail _storage-video-popup" title="{{videoLink.title}}">
                                    <img src="{{imgLink}}{{videoLink.image_title}}.png" alt="{{videoLink.title}}" class="thumbnail" />
                                    {% if azure %}
                                    <img class="play-icon" src="{{imgLink}}VideoPlay.png" />
                                    {% else %}
                                    <img class="play-icon" src="{{imgLink}}VideoPlay.svg" />
                                    {% endif %}
                                    <span class="metadata">
                                        <span class="date">
                                            <span>{{videoLink.publish_time}}</span>
                                            <span>{{videoLink.duration}}</span>
                                        </span>
                                    </span>
                                </a>
                                <p  id="des_edit_video{{forloop.counter}}">
                                    {{videoLink.description}}
                                </p>
                                <div id="video_editing_{{forloop.counter}}" style="display:none">
                                    <div>
                                        <div>标题</div><textarea style="width:300px;height:20px" id="video_title_{{forloop.counter}}">{{videoLink.title}}</textarea>
                                    </div>
                                    <div>
                                        <div>缩略图标题</div><textarea style="width:300px" id="video_image_title_{{forloop.counter}}">{{videoLink.image_title}}</textarea>
                                    </div>
                                    <div>
                                        <div>链接</div><textarea style="width:300px" id="video_url_{{forloop.counter}}">{{videoLink.video_url}}</textarea>
                                    </div>
                                    <div>
                                        <div>描述</div><textarea style="width:300px" id="video_description_{{forloop.counter}}">{{videoLink.description}}</textarea>
                                    </div>
                                    <div>
                                        <div>发布时间</div><textarea style="width:300px" id="video_publishDate_{{forloop.counter}}">{{videoLink.publish_time}}</textarea>
                                    </div>
                                    <div>
                                        <div>时长</div><textarea style="width:300px" id="video_duration_{{forloop.counter}}">{{videoLink.duration}}</textarea>
                                    </div>
                            </div>
                                <a href="javascript:editField('edit_video{{forloop.counter}}', 'video')" title="编辑">
                                    <img src="/static/landingPage/img/edit.png" style="width:20px;height:20px;margin-bottom:0px"/>
                                </a>
                                <a href="javascript:deleteField('edit_video_full{{forloop.counter}}')" title="删除">
                                        <img src="/static/landingPage/img/delete.png" style="width:20px;height:20px;margin-bottom:0px"/>
                                    </a>
                                
                            </div>
                            
                        {% endfor %}
                        {% if videoLinks|length < 3 %}
                            <div class="wa-spacer" id="edit_video_add">
                                <a href="javascript:add_video()" title="增加视频">
                                    <img src="{{imgLink}}add-icon-614x460.png" alt="增加视频" class="thumbnail" />
                                    
                                </a>
                                <p>
                                </p>
                            </div>
                        {% endif %}
                    </div>
                    <div class="wa-content">
                        <a href="/video-center/" class="wa-arrowLink">观看更多视频</a>
                    </div>
                    <div class="wa-content wa-content-divided">
                        <h2>
                            {{service_name}}服务更新 <a href=""><span class="wa-icon wa-icon-misc-rss"></span></a>
                        </h2>
                    </div>
                    <div class="wa-content wa-content-3up">
                        <div class="wa-content wa-content-3up" id="add_new_update">
                            <a href="javascript:addNewUpdate()">增加更新</a>
                        </div>
                    {% for recent in recentUpdates %}
                        <div class="wa-content wa-content-3up" id="edit_recent_update{{forloop.counter}}">
                            <div class="wa-serviceUpdate">
                                <h4 id="edit_recent_title{{forloop.counter}}">
                                    {{recent.title}}
                                    <a href="javascript:editField('edit_recent_title{{forloop.counter}}', 'text')" title="编辑">
                                        <img src="/static/landingPage/img/edit.png" style="width:20px;height:20px;margin-bottom:0px"/>
                                    </a>
                                    <a href="javascript:deleteField('edit_recent_update{{forloop.counter}}')" title="删除">
                                        <img src="/static/landingPage/img/delete.png" style="width:20px;height:20px;margin-bottom:0px"/>
                                    </a>
                                </h4>
                                <p class="article-date" id="edit_recent_date{{forloop.counter}}">
                                    {{recent.date}}
                                    <a href="javascript:editField('edit_recent_date{{forloop.counter}}', 'text')" title="编辑">
                                        <img src="/static/landingPage/img/edit.png" style="width:20px;height:20px;margin-bottom:0px"/>
                                    </a>
                                </p>
                                <p id="edit_recent_description{{forloop.counter}}">
                                    {{recent.description}}
                                    <a href="javascript:editField('edit_recent_description{{forloop.counter}}', 'text')" title="编辑">
                                        <img src="/static/landingPage/img/edit.png" style="width:20px;height:20px;margin-bottom:0px"/>
                                    </a>
                                </p>
                                <p class="article-content" style="display:none"  id="edit_recent_detail{{forloop.counter}}">
                                    {{recent.detail}}
                                    <a href="javascript:editField('edit_recent_detail{{forloop.counter}}', 'text')" title="编辑">
                                        <img src="/static/landingPage/img/edit.png" style="width:20px;height:20px;margin-bottom:0px"/>
                                    </a>
                                </p>
                                <a class="wa-arrowLink wa-arrowLink-blue" href="javascript:void(0);">了解更多</a>
                            </div>
                            <a href=""></a>
                        </div>
                    {% endfor %}
                        
                    </div>
                    <div class="wa-content">
                        <a href="{{update_search_link}}" class="wa-arrowLink">查看更多服务更新</a>
                    </div>
                </div>
            </div>
        </section>
        <div style="float:right;">
            <input onclick="submitPage()" type="button" value="保存" />
        </div>
    </div>

{% endblock %}